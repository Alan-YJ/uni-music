(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-video-play"],{"139f":function(e,t,i){var a=i("40e3");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var o=i("4f06").default;o("0f4357d2",a,!0,{sourceMap:!1,shadowMode:!1})},1890:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRecommendMv=o,t.getVideoUrl=n,t.getVideoDetail=s,t.getVideoInfo=r;var a=i("1375");function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1,limit:20},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};return(0,a.getData)("/personalized/mv",e,t)}function n(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return(0,a.getData)("/mv/url",Object.assign({},t,{id:e}),i)}function s(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return(0,a.getData)("/mv/detail",Object.assign({},t,{mvid:e}),i)}function r(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){};return(0,a.getData)("/mv/detail/info",Object.assign({},t,{mvid:e}),i)}},"1ebc":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a={AppPlus:"APP-PLUS",AppPlusNvue:"APP-PLUS-NVUE",H5:"H5",MpWeixin:"MP-WEIXIN",MpAlipay:"MP-ALIPAY",MpBaidu:"MP-BAIDU",MpToutiao:"MP-TOUTIAO",MpQq:"MP-QQ",Mp360:"MP-360",Mp:"MP",QuickappWebview:"quickapp-webview",QuickappWebviewUnion:"quickapp-webview-union",QuickappWebviewHuawei:"quickapp-webview-huawei"};t.default=a},"223b":function(e,t,i){"use strict";i.r(t);var a=i("23b3"),o=i("e927");for(var n in o)"default"!==n&&function(e){i.d(t,e,(function(){return o[e]}))}(n);i("ccff");var s,r=i("f0c5"),c=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"35eb19a5",null,!1,a["a"],s);t["default"]=c.exports},"23b3":function(e,t,i){"use strict";var a;i.d(t,"b",(function(){return o})),i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a}));var o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("v-uni-view",{staticClass:"video-play-page"},[i("v-uni-view",{staticClass:"header"},[i("v-uni-view",{staticClass:"iconfont iconchangyongicon-1",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.goBack.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"mv-tag"},[e._v("MV")]),i("v-uni-view",{staticClass:"opera-ext"},[i("v-uni-view",{staticClass:"iconfont"}),i("v-uni-view",{staticClass:"iconfont iconmore-"})],1)],1),i("v-uni-view",{staticClass:"vedio-content"},[i("v-uni-video",{ref:"videoRef",attrs:{src:e.url,id:"videoId",controls:!1,autoplay:e.autoplay,loop:!0,"danmu-list":e.commentList,"enable-play-gesture":!0},on:{timeupdate:function(t){arguments[0]=t=e.$handleEvent(t),e.timeupdate.apply(void 0,arguments)},click:function(t){arguments[0]=t=e.$handleEvent(t),e.pauseVideo.apply(void 0,arguments)}}}),i("v-uni-view",{staticClass:"vedio-opera"},[i("v-uni-view",{staticClass:"like"},[i("v-uni-view",{staticClass:"iconfont icondianzan",class:e.info.liked?"actived":""}),i("v-uni-text",[e._v(e._s(e.info.likedCount))])],1),i("v-uni-view",{staticClass:"comment"},[i("v-uni-view",{staticClass:"iconfont iconxinxi"}),i("v-uni-text",[e._v(e._s(e.info.commentCount))])],1),i("v-uni-view",{staticClass:"share",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.shareItem.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"iconfont iconfenxiang"}),i("v-uni-text",[e._v(e._s(e.info.shareCount))])],1),i("v-uni-view",{staticClass:"collect"},[i("v-uni-view",{staticClass:"iconfont iconshoucang",class:e.info.liked?"actived":""})],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.isPause,expression:"isPause"}],staticClass:"play-btn",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.pauseVideo.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"iconfont iconbofang1"})],1)],1),i("v-uni-view",{staticClass:"footer"},[i("v-uni-view",{staticClass:"artist-info"},[i("v-uni-image",{staticClass:"artist-header",attrs:{src:e.artistInfo.user?e.artistInfo.user.avatarUrl:"",mode:"aspectFill"}}),i("v-uni-text",{staticClass:"artist-name"},[e._v(e._s(e.info.artists&&e.info.artists[0]?e.info.artists[0].name:""))]),i("v-uni-text",{staticClass:"iconfont iconanonymous-iconfont"})],1),i("v-uni-view",{staticClass:"mv-info",on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.showDetail=!e.showDetail}}},[i("v-uni-view",[i("v-uni-text",[e._v(e._s(e.info.name))]),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.info.desc&&!e.showDetail,expression:"info.desc&&!showDetail"}],staticClass:"iconfont iconarrowdown"}),i("v-uni-text",{directives:[{name:"show",rawName:"v-show",value:e.info.desc&&e.showDetail,expression:"info.desc&&showDetail"}],staticClass:"iconfont iconarrowup"}),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:e.showDetail,expression:"showDetail"}]},[e._v(e._s(e.info.desc))])],1)],1),i("v-uni-view",{staticClass:"play-count"},[e._v(e._s(e.traceCount(e.info.playCount))+"次观看")]),i("div",{staticClass:"progress"},[i("v-uni-progress",{attrs:{"stroke-width":"2",activeColor:"white",backgroundColor:"gray",percent:e.playPercent},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.setProgress.apply(void 0,arguments)}}}),i("v-uni-view",{ref:"controlPointer",staticClass:"control-pointer"})],1),i("v-uni-view",{staticClass:"music-info"},[i("v-uni-view",{staticClass:"like"},[i("v-uni-view",{staticClass:"iconfont iconxihuan"})],1),i("v-uni-view",{staticClass:"m-music"},[i("v-uni-text",{staticClass:"iconfont iconyinfu"}),i("v-uni-text",{staticClass:"name"},[e._v(e._s(e.info.name))]),i("v-uni-text",{staticClass:"artist"},[e._v("- "+e._s(e.info.artistName))])],1)],1)],1)],1)},n=[]},"25eb":function(e,t,i){var a=i("23e7"),o=i("c20d");a({target:"Number",stat:!0,forced:Number.parseInt!=o},{parseInt:o})},3351:function(e,t,i){"use strict";i("c975"),i("a9e3"),i("25eb"),i("b680"),Object.defineProperty(t,"__esModule",{value:!0}),t.traceCount=o,t.setStorage=n,t.loadStorage=s,t.getPlayform=r;var a=i("7250");function o(e){return Number.parseInt(e)/Math.pow(10,8)>1?(Number.parseInt(e)/Math.pow(10,8)).toFixed(1)+"亿":Number.parseInt(e)/Math.pow(10,4)>1?(Number.parseInt(e)/Math.pow(10,4)).toFixed(1)+"万":e}function n(e,t){uni.setStorageSync(e,"string"===typeof t?t:JSON.stringify(t))}function s(e){var t=window.loadStorage(e);return t.indexOf("[")>-1||t.indexOf("{")>-1?JSON.parse(t):t}function r(){return(0,a.ifDefPlatform)()}},"40e3":function(e,t,i){var a=i("24fb");t=a(!1),t.push([e.i,'@charset "UTF-8";\r\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\r\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\r\n/* 颜色变量 */\r\n/* 行为相关颜色 */\r\n/* 文字基本颜色 */\r\n/* 背景颜色 */\r\n/* 边框颜色 */\r\n/* 尺寸变量 */\r\n/* 文字尺寸 */\r\n/* 图片尺寸 */\r\n/* Border Radius */\r\n/* 水平间距 */\r\n/* 垂直间距 */\r\n/* 透明度 */\r\n/* 文章场景相关 */.iconfont[data-v-35eb19a5]{color:#fff;font-size:%?70?%}.video-play-page[data-v-35eb19a5]{background-color:#000;height:100vh}.video-play-page uni-video[data-v-35eb19a5]{width:100%}.video-play-page .header[data-v-35eb19a5]{height:%?200?%;line-height:%?100?%;padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.video-play-page .header .mv-tag[data-v-35eb19a5]{background-color:#f0f0f0;margin-top:%?28?%;height:%?48?%;line-height:%?48?%;padding:0 %?40?%;border-radius:%?60?% %?10?% %?60?% %?10?%;font-weight:700}.video-play-page .header .iconmore-[data-v-35eb19a5]{font-size:%?48?%}.video-play-page .vedio-content[data-v-35eb19a5]{position:relative;color:#fff;text-align:center}.video-play-page .vedio-content .play-btn[data-v-35eb19a5]{position:absolute;left:0;right:0;top:0;bottom:0;background-color:hsla(0,0%,78.4%,0);opacity:.8;text-align:center;padding:15%}.video-play-page .vedio-content .play-btn .iconfont[data-v-35eb19a5]{font-size:calc(%?375?% * .6)}.video-play-page .vedio-content .vedio-opera[data-v-35eb19a5]{position:absolute;right:%?20?%;z-index:1}.video-play-page .vedio-content .vedio-opera > uni-view[data-v-35eb19a5]{padding-bottom:%?20?%}.video-play-page .vedio-content .actived[data-v-35eb19a5]{color:#ff2419}.video-play-page .footer[data-v-35eb19a5]{position:fixed;bottom:0;width:100%;color:#fff}.video-play-page .footer .play-count[data-v-35eb19a5]{padding:%?20?%;color:hsla(0,0%,100%,.5)}.video-play-page .footer .mv-info[data-v-35eb19a5]{padding:%?20?%}.video-play-page .footer .mv-info .iconfont[data-v-35eb19a5]{font-size:%?10?%}.video-play-page .footer .artist-info[data-v-35eb19a5]{line-height:%?50?%;padding:0 %?20?%;vertical-align:middle}.video-play-page .footer .artist-info .artist-header[data-v-35eb19a5]{border-radius:50%;border-color:#fff;border-style:solid;border-width:%?2?%;width:%?50?%;height:%?50?%;background-color:#fff;margin-right:%?20?%;vertical-align:middle}.video-play-page .footer .artist-info .artist-name[data-v-35eb19a5]{font-weight:700;line-height:%?50?%;margin-right:%?20?%;vertical-align:middle}.video-play-page .footer .artist-info .iconfont[data-v-35eb19a5]{padding:%?5?% %?15?%;background-color:#ff2419;border-radius:%?20?%;font-size:%?2?%;vertical-align:middle}.video-play-page .footer .artist-info .iconfont[data-v-35eb19a5]:before{position:relative;top:-1px}.video-play-page .footer .music-info[data-v-35eb19a5]{padding:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex}.video-play-page .footer .music-info .m-music[data-v-35eb19a5]{margin-left:%?20?%;display:-webkit-box;display:-webkit-flex;display:flex;line-height:%?80?%}.video-play-page .footer .music-info .m-music .iconfont[data-v-35eb19a5]{font-size:%?28?%}.video-play-page .footer .music-info .m-music .name[data-v-35eb19a5]{color:#fff;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;max-width:50%}.video-play-page .footer .music-info .m-music .artist[data-v-35eb19a5]{color:#fff}.video-play-page .footer .progress[data-v-35eb19a5]{width:100%;position:relative}.video-play-page .footer .progress .control-pointer[data-v-35eb19a5]{position:absolute;left:%?-10?%;top:%?-8?%;z-index:1;background-color:#fff;width:%?20?%;height:%?20?%;border-radius:50%;opacity:.9}',""]),e.exports=t},7250:function(e,t,i){"use strict";var a=i("4ea4");Object.defineProperty(t,"__esModule",{value:!0}),t.ifDefPlatform=o;a(i("1ebc"));function o(){var e;return e=EPlatform.H5,e}},"7d0c":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getArtistById=o;var a=i("1375");function o(e,t){return(0,a.getData)("/artist/detail",Object.assign({},t,{id:e}))}},"9a4b":function(e,t,i){"use strict";i("d3b7"),i("3ca3"),i("ddb0"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=i("3351"),o=i("7d0c"),n=i("1890"),s={data:function(){return{option:{},url:"",info:{},artistInfo:{},commentList:[],autoplay:!0,isPause:!1,playPercent:0,videoContext:void 0,timerSecond:0,showDetail:!1}},onLoad:function(e){this.option=e,e&&e.id||uni.switchTab({url:"/pages/index/index"}),uni.getNetworkType({success:function(e){"2g"!=e.networkType&&"3g"!=e.networkType&&"4g"!=e.networkType||(this.autoplay=!1,console.info("not auto play"))}}),this.loadVideo(e.id)},watch:{isPause:function(e){e?this.$refs.videoRef.pause():this.$refs.videoRef.play()}},methods:{loadVideo:function(e){var t=this;Promise.all([this.loadUrl(e),this.loadInfo(e),this.loadDetail(e)]).then((function(e){t.loadArtist(t.info.artistId),console.info("load success"),t.videoContext=uni.createVideoContext("videoId"),t.timerSecond=t.info.duration/1e3}))},loadUrl:function(e){var t=this;return(0,n.getVideoUrl)(e).then((function(e){t.url=e.data.url}))},loadDetail:function(e){var t=this;return(0,n.getVideoDetail)(e).then((function(e){Object.assign(t.info,e.data)}))},loadInfo:function(e){var t=this;return(0,n.getVideoInfo)(e).then((function(e){Object.assign(t.info,e)}))},loadArtist:function(e){var t=this;return(0,o.getArtistById)(e).then((function(e){Object.assign(t.artistInfo,e.data)}))},timeupdate:function(e){var t=this.$refs.controlPointer;t._vnode.elm.style.left="calc(".concat(e.detail.currentTime/e.detail.duration*100+"%"," - 5px)"),this.playPercent=e.detail.currentTime/e.detail.duration*100},setProgress:function(e){console.info(e),this.playPercent=e.detail.x/375+"%";var t=this.$refs.controlPointer;this.videoContext.seek(this.timerSecond*(e.detail.x/375)),console.info("dom",t)},loadComment:function(){console.info("load comment")},shareItem:function(){console.info("share item")},pauseVideo:function(){this.isPause=!this.isPause},goBack:function(){uni.navigateBack()},traceCount:a.traceCount}};t.default=s},ccff:function(e,t,i){"use strict";var a=i("139f"),o=i.n(a);o.a},e927:function(e,t,i){"use strict";i.r(t);var a=i("9a4b"),o=i.n(a);for(var n in a)"default"!==n&&function(e){i.d(t,e,(function(){return a[e]}))}(n);t["default"]=o.a}}]);